<semantic-query query='
        PREFIX Form: <http://culture.gouv.qc.ca/form/>

        SELECT ?form ?class ?name WHERE {
          BIND(Form:[[urlParam "formUUID"]] as ?form)
          ?form <http://hercules.gouv.qc.ca/ontology/meta/forClass> ?class .
          ?form <http://hercules.gouv.qc.ca/ontology/meta/hasName> ?name .
        } 
        ' template='{{> fieldsTemplate}}'>

  <template id='fieldsTemplate'>
    <div>
      {{#each bindings}}
        <semantic-form subject='{{form.value}}' post-action='redirect' browser-persistence=false form-id='FieldsForm'
          fields='[
          {
            "id": "type",
            "label": "Type",
            "description": "Le type du formulaire",
            "xsdDatatype": "xsd:anyURI",
            "selectPattern": "SELECT $value WHERE { $subject a $value }",
            "insertPattern": "INSERT { $subject a $value } WHERE { }",
            "deletePattern": "DELETE { $subject a $value } WHERE { }"
          },
          {
            "id": "class",
            "label": "Classe",
            "description": "La classe de l&#39;entité à créer par le formulaire",
            "xsdDatatype": "xsd:anyURI",
            "minOccurs": "1",
            "maxOccurs": "1",
            "defaultValues": [ "http://erlangen-crm.org/170309/E1_CRM_Entity" ],
            "valueSetPattern": "
              SELECT $value $label WHERE {
                $value a owl:Class .
                $value rdfs:label $label .
              }
            ",
            "selectPattern": "SELECT $value WHERE { $subject <http://hercules.gouv.qc.ca/ontology/meta/forClass> $value }",
            "insertPattern": "INSERT { $subject <http://hercules.gouv.qc.ca/ontology/meta/forClass> $value } WHERE { }",
            "deletePattern": "DELETE { $subject <http://hercules.gouv.qc.ca/ontology/meta/forClass> $value } WHERE { }"
          },
          {
            "id": "name",
            "label": "Nom",
            "description": "Le nom du formulaire",
            "xsdDatatype": "xsd:string",
            "minOccurs": "1",
            "maxOccurs": "1",
            "selectPattern": "SELECT $value WHERE { $subject <http://hercules.gouv.qc.ca/ontology/meta/hasName> $value }",
            "insertPattern": "INSERT { $subject <http://hercules.gouv.qc.ca/ontology/meta/hasName> $value } WHERE { }",
            "deletePattern": "DELETE { $subject <http://hercules.gouv.qc.ca/ontology/meta/hasName> $value } WHERE { }"
          },
          {
            "id": "input",
            "label": "Champ d&#39;entrée du formulaire",
            "description": "Le champ d&#39;entrée à ajouter au formulaire",
            "xsdDatatype": "xsd:anyURI",
            "minOccurs": "1",
            "selectPattern": "SELECT $value WHERE { $subject <http://hercules.gouv.qc.ca/ontology/meta/hasInput> $value }",
            "insertPattern": "INSERT { $subject <http://hercules.gouv.qc.ca/ontology/meta/hasInput> $value } WHERE { }",
            "deletePattern": "DELETE { $subject <http://hercules.gouv.qc.ca/ontology/meta/hasInput> $value } WHERE { }"
          }
          ]'>
          <bs-panel>
            <h4>Définir les champs d'entrée du formulaire</h4>
            <semantic-form-recover-notification></semantic-form-recover-notification>
            <bs-tabs fixed-key="form">
              <semantic-form-hidden-input for='type' default-value='http://hercules.gouv.qc.ca/ontology/meta/Form'>
              </semantic-form-hidden-input>
              <semantic-form-hidden-input for='class' default-value='{{class.value}}'></semantic-form-hidden-input>
              <semantic-form-hidden-input for='name' default-value='{{name.value}}'></semantic-form-hidden-input>

              {{> Forms:InputSwitch field='input'}}

              <button name='submit' class='btn btn-default'>Suivant</button>
              <button name='reset' class='btn btn-default'>Réinitialiser</button>
            </bs-tabs>
          </bs-panel>
        </semantic-form> 
      {{/each}}
    </div>
  </template>
</semantic-query>