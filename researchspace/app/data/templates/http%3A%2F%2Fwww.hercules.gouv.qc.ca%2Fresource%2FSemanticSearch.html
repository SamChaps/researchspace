<div class='page__body'>

    <semantic-search categories='{
        "<http://www.w3.org/2001/XMLSchema#date>": [{
          "kind": "date-range",
          "datatype": "http://www.w3.org/2001/XMLSchema#date",
          "queryPattern": "
            {
              $subject ?__relation__ ?date .
              FILTER(?date <= ?__dateEndValue__) .
              FILTER(?date >= ?__dateBeginValue__) .
           }"
      }]
     }' relations='{
       "<http://www.hercules.gouv.qc.ca/ontology/birth>": [
         {
           "kind": "date-range",
           "queryPattern": "
           {
            $subject <http://erlangen-crm.org/170309/P98i_was_born> ?birth .
            ?birth <http://erlangen-crm.org/170309/P4_has_time-span> ?timespan .
            ?timespan <http://cidoccrm-mccq.gouv.qc.ca/P82a_begin_of_the_begin> ?begin .
            FILTER(?begin <= ?__dateEndValue__) .
            FILTER(?begin >= ?__dateBeginValue__) .
           }
           "
         }
       ],
       "<http://www.hercules.gouv.qc.ca/ontology/death>": [
       {
         "kind": "date-range",
         "queryPattern": "
         {
           $subject <http://erlangen-crm.org/170309/P100i_died_in> ?death .
           ?death <http://erlangen-crm.org/170309/P4_has_time-span> ?timespan .
           ?timespan <http://cidoccrm-mccq.gouv.qc.ca/P82a_begin_of_the_begin> ?begin .
           FILTER(?begin <= ?__dateEndValue__) .
           FILTER(?begin >= ?__dateBeginValue__) .
        }
         "
       }
     ]
     }' search-profile='{
      "categories": [{
                       "iri": "<http://erlangen-crm.org/170309/E39_Actor>",
                       "label": "Actor",
                       "thumbnail": "../../assets/images/search/person.svg"
                     },
                     {
                       "iri": "<http://www.w3.org/2001/XMLSchema#date>",
                       "label": "Time",
                       "thumbnail": "../../assets/images/search/date.svg"
                     },
                     {
                      "iri": "<http://erlangen-crm.org/170309/E53_Place>",
                      "label": "Place",
                      "thumbnail": "../../assets/images/search/place.svg"
                     },
                     {
                      "iri": "<http://erlangen-crm.org/170309/E5_Event>",
                      "label": "Event",
                      "thumbnail": "../../assets/images/search/event.svg"
                     },
                     {
                      "iri": "<http://erlangen-crm.org/170309/E70_Thing>",
                      "label": "Thing",
                      "thumbnail": "../../assets/images/search/thing.svg"
                     }
                  ],
      "relations": [{
                      "iri": "<http://www.hercules.gouv.qc.ca/ontology/birth>",
                      "label": "born in",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://www.w3.org/2001/XMLSchema#date>"
                    },
                    {
                      "iri": "<http://www.hercules.gouv.qc.ca/ontology/death>",
                      "label": "died in",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://www.w3.org/2001/XMLSchema#date>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P107i_is_current_or_former_member_of>",
                      "label": "member of",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://erlangen-crm.org/170309/E39_Actor>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P109i_is_current_or_former_curator_of>",
                      "label": "curator of",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://erlangen-crm.org/170309/E70_Thing>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P49i_is_former_or_current_keeper_of>",
                      "label": "keeper of",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://erlangen-crm.org/170309/E70_Thing>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P51i_is_former_or_current_owner_of>",
                      "label": "owner of",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://erlangen-crm.org/170309/E70_Thing>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P11i_participated_in>",
                      "label": "participated in",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://erlangen-crm.org/170309/E5_Event>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P74_has_current_or_former_residence>",
                      "label": "has residence",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://erlangen-crm.org/170309/E53_Place>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P107_has_current_or_former_member>",
                      "label": "has member",
                      "hasDomain": "<http://erlangen-crm.org/170309/E39_Actor>",
                      "hasRange": "<http://erlangen-crm.org/170309/E39_Actor>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P74i_is_current_or_former_residence_of>",
                      "label": "residence of",
                      "hasDomain": "<http://erlangen-crm.org/170309/E53_Place>",
                      "hasRange": "<http://erlangen-crm.org/170309/E39_Actor>"
                    },
                    {
                      "iri": "<http://erlangen-crm.org/170309/P11_had_participant>",
                      "label": "had participant",
                      "hasDomain": "<http://erlangen-crm.org/170309/E5_Event>",
                      "hasRange": "<http://erlangen-crm.org/170309/E39_Actor>"
                    }
                   ]
    }'>
  
      <semantic-search-query-builder></semantic-search-query-builder>
      <div data-flex-layout="row stretch-stretch">
        <div data-flex-self="size-1of3" style="flex: 0 0 20px;">
          <semantic-search-facet></semantic-search-facet>
        </div>
        <semantic-search-result-holder>
          <div data-flex-self="md-full">
            <semantic-search-result>
              <mp-sparql-result-counts id='query-count' query="SELECT DISTINCT * {}" template='{{#if hasLimit}} <bs-alert bs-style="warning">
                                   Showing {{numberOfResults}} of {{totalNumberOfResults}} matches. <strong>Please, refine your search.</strong> </bs-alert>
                                   {{else}}<span> found {{numberOfResults}} matches </span>{{/if}}'>
              </mp-sparql-result-counts>
            </semantic-search-result>
            <bs-tabs unmount-on-exit=true id='search-results' animation=false>
              <bs-tab event-key="1" title="Grid">
                <bs-alert bs-style="info"> Only entities with image representation are shown in the Grid! </bs-alert>
                <semantic-search-result>
                  <semantic-table id='grid-result' query='
                      PREFIX schema: <http://schema.org/>
  
                      SELECT DISTINCT ?subject ?thumbnail WHERE {
                        OPTIONAL { ?subject schema:thumbnail ?image  }
  
                        BIND(
                          REPLACE(
                            COALESCE(
                              STR(?image),
                              "//upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/200px-No_image_available.svg.png"
                            ),
                            "http://", "//"
                          ) as ?thumbnail
                        ).
                      }' tuple-template='{{>tupleTemplate}}' options:='{"showFilter":false, "resultsPerPage":16}'>
                    <template id='tupleTemplate'>
                      <div class="rs-grid-element text-center panel panel-default">
                        <div class="panel-body">
                          <img src="{{thumbnail.value}}" style="height:120px;max-width:150px;" class="img-rounded">
                        </div>
                        <div class="panel-footer" style="position: relative">
                          <semantic-link class="grid-resource-link" uri="{{subject.value}}"></semantic-link>
                        </div>
                      </div>
                    </template>
                  </semantic-table>
                </semantic-search-result>
              </bs-tab>
              <bs-tab event-key="2" title="Table">
                <semantic-search-result>
                  <semantic-table id='table-result' query='SELECT DISTINCT ?subject WHERE { }'
                    options='{"showFilter":false, "resultsPerPage":10'>
                  </semantic-table>
                </semantic-search-result>
              </bs-tab>
            </bs-tabs>
            <bs-panel>
              <semantic-search-result>
                <mp-sparql-download id='csv-download' query="SELECT * WHERE { }" header="text/csv"
                  filename="csv-result.csv">
                  <button class="btn btn-default">Download CSV</button>
                </mp-sparql-download>
              </semantic-search-result>
              <semantic-search-result>
                <mp-sparql-download id='json-download' query="SELECT * WHERE { }" header="application/sparql-results+json"
                  filename="json-result.json">
                  <button class="btn btn-default">Download JSON</button>
                </mp-sparql-download>
              </semantic-search-result>
            </bs-panel>
          </div>
        </semantic-search-result-holder>
      </div>
    </semantic-search>
  </div>